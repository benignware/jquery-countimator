(function(f,k){var h="countimator";var e={duration:1000,value:null,max:0,lineWidth:8,valueColor:"#aaeeff",maxColor:"lightgray",countSelector:".counter-count",maxSelector:".counter-max",style:null,template:null,engine:"auto",animateOnInit:true,animateOnAppear:true,bodyClass:"counter-body",decimals:0,decimalDelimiter:".",thousandDelimiter:null,pad:false,};var a=["value","count","min","max","template","decimals","decimalDelimiter","thousandDelimiter","pad","style"];function b(v,t,u,r){t=isNaN(t=Math.abs(t))?2:t,u=typeof u=="undefined"?".":u,r=typeof r=="undefined"?",":r,r=typeof r=="string"?r:"",s=v<0?"-":"",i=parseInt(v=Math.abs(+v||0).toFixed(t))+"",j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+r:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+r)+(t?u+Math.abs(v-i).toFixed(t).slice(2):"")}function c(t,r){var u=""+t;while(u.length<r){u="0"+u}return u}function l(r){return f(r).contents().filter(function(){return this.nodeType===Node.TEXT_NODE})}function n(r){var v=r.getBoundingClientRect().top,u=r.getBoundingClientRect().left,t,r=r.parentNode;do{t=r.getBoundingClientRect();if(v<=t.bottom===false&&u<=t.right===false){return false}r=r.parentNode}while(r!=document.body);return v<=document.documentElement.clientHeight&&u<=document.documentElement.clientWidth}function d(r){if(r instanceof jQuery){r=r[0]}var t=r.getBoundingClientRect();return(t.top>=0&&t.left>=0&&t.bottom<=(k.innerHeight||document.documentElement.clientHeight)&&t.right<=(k.innerWidth||document.documentElement.clientWidth))}var m=k.mozRequestAnimationFrame||k.webkitRequestAnimationFrame||k.msRequestAnimationFrame||k.oRequestAnimationFrame||function(r){k.setTimeout(r,1000/60)};function g(){var u=["Handlebars","Mugine"];for(var r=0,t;t=u[r];r++){if(k[t]&&k[t].compile){return t}}return null}var q=function o(r,v){var M=this;var I=f(r);f(a).each(function(Q,R){if(typeof I.data(R)!="undefined"){v[R]=I.data(R)}});var t,K,G,E;var H,y;var J=false;function L(){var W=D("value");var V=D("count");var R=D("max");if(!V){var X=w();if(X){var W=D("value");if(typeof W!="number"){v.value=X.nodeValue}else{v.count=X.nodeValue}}}if(!R){var S=F();if(S){v.max=S.nodeValue}}var T=I.find("script[type*='text/x-']");if(T.length){v.template=T.html();T.remove()}var U=D("style");if(typeof U=="object"){if(typeof U.draw=="function"){t=document.createElement("canvas");if(t.getContext){var Q=r.firstChild;E=f('<span class="'+D("bodyClass")+'"></span>');I.append(E);E.append(Q);f(t).insertBefore(E)}}}f(k).on("resize",function(){N.call(M)});f(k).on("scroll touchmove",function(){if(D("animateOnInit")&&D("animateOnAppear")&&d(r)){z.call(M)}});P.call(this);N.call(this);if(D("animateOnInit")){if(D("animateOnAppear")&&d(r)){z()}else{P.call(this)}}else{v.count=D("value");P.call(this)}N.call(this)}function x(Q,R){if(Q=="style"){return}v[Q]=R;switch(Q){case"value":if(!J){v.count=R;P.call(this)}else{A(R)}break}}function D(R){var U=v[R];switch(R){case"value":var Q=D("max");var S=D("min");var T=D("count");var W=parseFloat(U);if(!isNaN(W)){W=Math.max(W,S);U=Math.min(W,Q)}break;case"count":var Q=D("max");var S=D("min");U=Math.max(U,S);U=Math.min(U,Q);U=parseFloat(U);if(isNaN(U)){U=S}break;case"max":if(!U){U=parseFloat(v.value)}break;case"min":if(!U){U=0}break;case"style":U=f.fn.countimator.getStyle(U);break;case"template":try{U=f(U).html()}catch(V){}break}return U}function N(){var R=I.css("position");var V=parseFloat(I.css("font-size"));var U=parseFloat(I.css("line-height"));var W=I.css("display");I.css({position:R!="static"?R:"relative",textAlign:"center"});var T=I.width();var Q=I.height();if(t){f(t).css({position:"absolute",top:0,left:0,})}var S=D("style");if(S&&S.resize){S.resize.call(M,r,T,Q)}if(t){t.width=I.innerWidth();t.height=I.innerHeight()}C.call(this)}function A(Q){v.value=Q;if(!J){z()}else{}}function z(){H=new Date().getTime();y=D("count");J=true;m(B)}function w(R){var Q=I.find(v.countSelector)[0];var S=l(Q||r)[0];return S}function F(R){var Q=I.find(v.maxSelector)[0];if(Q){return l(Q)[0]}return null}function O(S){var R=D("decimals");var T=D("decimalDelimiter");var Q=D("thousandDelimiter");string=b(S,R,T,Q);string=c(string,D("pad"));return string}function P(){var ac=D("max");var W=D("min");var ae=D("value");var Z=D("count");var T=O(Z);var X=O(ae);var V=O(ac);var ag=O(W);var ab=D("engine");ab=ab&&ab!="auto"?ab:g();ab=typeof ab=="string"?k[ab]:ab;var af=D("template");var Y;if(ab&&af){var ad=ab.compile(af);if(ad){Y=ad({count:T,value:X,max:V,min:ag})}var S=document.createElement("div");S.innerHTML=Y;var U=S.childNodes;if(E){f(E).empty();f(E).append(U)}else{f(r).contents().not(G).remove();f(r).append(U)}}else{Y=T;var aa=w();if(aa){aa.nodeValue=T}var R=F();if(R){R.nodeValue=V}}var Q=D("style");if(Q&&Q.render){Q.render.call(M,Z)}C.call(this)}function C(){var S=D("count");var R=D("style");if(R&&R.draw&&t&&t.getContext){var Q=t.getContext("2d");Q.clearRect(0,0,t.width,t.height);R.draw.call(M,t,S)}}function B(){var W=D("duration");var Q=D("max");var V=D("value");var U=new Date().getTime();var R=H+W;var S=Math.min((W-(R-U))/W,1);var T=y+S*(V-y);v.count=T;P.call(this);if(S<1&&J){m(B)}else{u.call(this)}}function u(){J=false}this.resize=function(){N.call(this)};this.getOption=function(Q){return D.call(this,Q)};this.setOption=function(Q,R){x.call(this,Q,R)};this.animate=function(Q){A.call(this,Q)};L.call(this)};f.fn[h]=function(r){return this.each(function(){if(!f(this).data(h)){f(this).data(h,new q(this,f.extend({},e,r)))}return f(this)})};var p={};f.fn[h].registerStyle=function(r,t){p[r]=t};f.fn[h].getStyle=function(r){return p[r]}})(jQuery,window);